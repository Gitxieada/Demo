var t=Object.defineProperty,e=Object.prototype.hasOwnProperty,a=Object.getOwnPropertySymbols,n=Object.prototype.propertyIsEnumerable,i=(e,a,n)=>a in e?t(e,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[a]=n;import{m as s,n as r}from"./index.6f62422a.js";import{d as h}from"./debounce.24fbb78c.js";const o={"安徽":"anhui","陕西":"shanxi1","澳门":"aomen","北京":"beijing","重庆":"chongqing","福建":"fujian","甘肃":"gansu","广东":"guangdong","广西":"guangxi","贵州":"guizhou","海南":"hainan","河北":"hebei","黑龙江":"heilongjiang","河南":"henan","湖北":"hubei","湖南":"hunan","江苏":"jiangsu","江西":"jiangxi","吉林":"jilin","辽宁":"liaoning","内蒙古":"neimenggu","宁夏":"ningxia","青海":"qinghai","山东":"shandong","上海":"shanghai","山西":"shanxi","四川":"sichuan","台湾":"taiwan","天津":"tianjin","香港":"xianggang","新疆":"xinjiang","西藏":"xizang","云南":"yunnan","浙江":"zhejiang"};const c={data:()=>({chartInstance:null,allData:null,mapData:{}}),computed:((t,s)=>{for(var r in s||(s={}))e.call(s,r)&&i(t,r,s[r]);if(a)for(var r of a(s))n.call(s,r)&&i(t,r,s[r]);return t})({},s(["theme"])),watch:{theme(){this.chartInstance.dispose(),this.initChart(),this.screenAdapter(),this.updateChart()}},created(){},mounted(){this.initChart(),this.getData(),window.addEventListener("resize",h(this.screenAdapter,100)),this.screenAdapter()},destroyed(){window.removeEventListener("resize",h(this.screenAdapter,100))},methods:{async initChart(){this.chartInstance=this.$echarts.init(this.$refs.ref,this.theme);const{data:t}=await this.$http.get("/map/china");this.$echarts.registerMap("china",t);this.chartInstance.setOption({title:{text:"▎商家分布",left:20,top:20},geo:{type:"map",map:"china",top:"5%",bottom:"5%",itemStyle:{areaColor:"#2e72bf",borderColor:"#333"}},legend:{left:"5%",bottom:"5%",orient:"vertical"}}),this.chartInstance.on("click",(async t=>{const e=function(t){return{key:o[t],path:`/map/province/${o[t]}`}}(t.name);if(void 0!==e.key){if(!this.mapData[e.key]){const{data:t}=await this.$http.get(e.path);this.$echarts.registerMap(e.key,t),this.mapData[e.key]=t}this.chartInstance.setOption({geo:{map:e.key}})}}))},async getData(){const{data:t}=await this.$http.get("/map");this.allData=t,this.updateChart()},updateChart(){const t={legend:{data:this.allData.map((t=>t.name))},series:this.allData.map((t=>({type:"effectScatter",rippleEffect:{scale:5,brushType:"stroke"},coordinateSystem:"geo",name:t.name,data:t.children})))};this.chartInstance.setOption(t)},screenAdapter(){const t=this.$refs.ref.offsetWidth/100*3.6,e={title:{textStyle:{fontSize:t}},legend:{itemWidth:t/2,itemHeight:t/2,itemGap:t/2,textStyle:{fontSize:t/2}}};this.chartInstance.setOption(e),this.chartInstance.resize()},revertMap(){this.chartInstance.setOption({geo:{map:"china"}})}}},p={};var l=r(c,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"com-container",on:{dblclick:t.revertMap}},[a("div",{ref:"ref",staticClass:"com-chart"})])}),[],!1,(function(t){for(let e in p)this[e]=p[e]}),"b13f96f6",null,null).exports;export{l as M};
