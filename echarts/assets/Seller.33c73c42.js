var t=Object.defineProperty,e=Object.prototype.hasOwnProperty,a=Object.getOwnPropertySymbols,r=Object.prototype.propertyIsEnumerable,i=(e,a,r)=>a in e?t(e,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[a]=r;import{m as s,n}from"./index.9bf911c1.js";import{d as o}from"./debounce.24fbb78c.js";const h={data:()=>({chartInstance:null,allData:null,currentPage:1,totalPage:0,timerId:null}),computed:((t,s)=>{for(var n in s||(s={}))e.call(s,n)&&i(t,n,s[n]);if(a)for(var n of a(s))r.call(s,n)&&i(t,n,s[n]);return t})({},s(["theme"])),watch:{theme(){this.chartInstance.dispose(),this.initChart(),this.screenAdapter(),this.updateChart()}},created(){},mounted(){this.initChart(),this.getData(),window.addEventListener("resize",o(this.screenAdapter,100)),this.screenAdapter()},destroyed(){clearInterval(this.timerId),window.removeEventListener("resize",o(this.screenAdapter,100))},methods:{initChart(){this.chartInstance=this.$echarts.init(this.$refs.ref,this.theme);const t={title:{text:"▎商家销售统计",left:20,top:20},grid:{top:"20%",left:"3%",right:"6%",bottom:"3%",containLabel:!0},tooltip:{trigger:"axis",axisPointer:{type:"line",z:0,lineStyle:{color:"#2D3443"}}},xAxis:{type:"value"},yAxis:{type:"category"},series:[{type:"bar",label:{show:!0,position:"right",textStyle:{color:"white"}},itemStyle:{color:new this.$echarts.graphic.LinearGradient(0,0,1,0,[{offset:0,color:"#5052EE"},{offset:1,color:"#AB6EE5"}])}}]};this.chartInstance.setOption(t),this.chartInstance.on("mouseover",(()=>{clearInterval(this.timerId)})),this.chartInstance.on("mouseout",(()=>{this.startInterval()}))},async getData(){const{data:t}=await this.$http.get("/seller");this.allData=t,this.allData.sort(((t,e)=>t.value-e.value)),this.totalPage=Math.ceil(this.allData.length/5),this.updateChart(),this.startInterval()},updateChart(){const t=5*(this.currentPage-1),e=5*this.currentPage,a=this.allData.slice(t,e),r={yAxis:{data:a.map((t=>t.name))},series:{data:a.map((t=>t.value))}};this.chartInstance.setOption(r)},startInterval(){this.timerId&&clearInterval(this.timerId),this.timerId=setInterval((()=>{++this.currentPage>this.totalPage&&(this.currentPage=1),this.updateChart()}),3e3)},screenAdapter(){const t=this.$refs.ref.offsetWidth/100*3.6,e={title:{textStyle:{fontSize:t}},tooltip:{axisPointer:{lineStyle:{width:t}}},series:{barWidth:t,itemStyle:{barBorderRadius:[0,t/2,t/2,0]}}};this.chartInstance.setOption(e),this.chartInstance.resize()}}},l={};var c=n(h,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"com-container"},[e("div",{ref:"ref",staticClass:"com-chart"})])}),[],!1,(function(t){for(let e in l)this[e]=l[e]}),"721b0685",null,null).exports;export{c as S};
