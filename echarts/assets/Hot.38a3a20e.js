var t=Object.defineProperty,e=Object.prototype.hasOwnProperty,i=Object.getOwnPropertySymbols,a=Object.prototype.propertyIsEnumerable,s=(e,i,a)=>i in e?t(e,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[i]=a;import{m as n,n as r}from"./index.9bf911c1.js";import{g as h}from"./theme_utils.5763f5c9.js";import{d as l}from"./debounce.24fbb78c.js";const o={name:"Hot",data:()=>({chartInstance:null,allData:null,currentIndex:0,titleFontSize:0}),watch:{theme(){this.chartInstance.dispose(),this.initChart(),this.screenAdapter(),this.updateChart()}},computed:((t,n)=>{for(var r in n||(n={}))e.call(n,r)&&s(t,r,n[r]);if(i)for(var r of i(n))a.call(n,r)&&s(t,r,n[r]);return t})({cateName(){return this.allData?this.allData[this.currentIndex].name:""},comStyle(){return{fontSize:this.titleFontSize+"px",color:h(this.theme).titleColor}}},n(["theme"])),created(){},mounted(){this.initChart(),this.getData(),window.addEventListener("resize",l(this.screenAdapter,100)),this.screenAdapter()},destroyed(){window.removeEventListener("resize",l(this.screenAdapter,100))},methods:{toLeft(){this.currentIndex--,this.currentIndex<0&&(this.currentIndex=this.allData.length-1),this.updateChart()},toRight(){this.currentIndex++,this.currentIndex>this.allData.length-1&&(this.currentIndex=0),this.updateChart()},initChart(){this.chartInstance=this.$echarts.init(this.$refs.ref,this.theme);const t={title:{text:"▎热销商品占比",left:20,top:20},legend:{top:"15%",icon:"circle"},tooltip:{show:!0,formatter:t=>{const e=t.data.children;let i=0;e.forEach((t=>{i+=t.value}));let a="";return e.forEach((t=>{a+=`${t.name}: ${parseInt(t.value/i*100)+"%"} <br/>`})),a}},series:[{type:"pie",label:{show:!1},emphasis:{label:{show:!0},labelLine:{show:!1}}}]};this.chartInstance.setOption(t)},async getData(){const{data:t}=await this.$http.get("/hot");this.allData=t,this.updateChart()},updateChart(){const t=this.allData[this.currentIndex].children.map((t=>({name:t.name,value:t.value,children:t.children}))),e={legend:{data:this.allData[this.currentIndex].children.map((t=>t.name))},series:[{data:t}]};this.chartInstance.setOption(e)},screenAdapter(){this.titleFontSize=this.$refs.ref.offsetWidth/100*3.6;const t={title:{textStyle:{fontSize:this.titleFontSize}},legend:{itemWidth:this.titleFontSize,itemHeight:this.titleFontSize,itemGap:this.titleFontSize/2,textStyle:{fontSize:this.titleFontSize/2}},series:[{radius:4.5*this.titleFontSize,center:["50%","60%"]}]};this.chartInstance.setOption(t),this.chartInstance.resize()}}},c={};var d=r(o,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"com-container"},[i("div",{ref:"ref",staticClass:"com-chart"}),t._v(" "),i("span",{staticClass:"iconfont arr-left",style:t.comStyle,on:{click:t.toLeft}},[t._v("")]),t._v(" "),i("span",{staticClass:"iconfont arr-right",style:t.comStyle,on:{click:t.toRight}},[t._v("")]),t._v(" "),i("span",{staticClass:"cate-name",style:t.comStyle},[t._v("\n    "+t._s(t.cateName)+"\n  ")])])}),[],!1,(function(t){for(let e in c)this[e]=c[e]}),"0e240996",null,null).exports;export{d as H};
