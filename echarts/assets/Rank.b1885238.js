var t=Object.defineProperty,e=Object.prototype.hasOwnProperty,a=Object.getOwnPropertySymbols,s=Object.prototype.propertyIsEnumerable,r=(e,a,s)=>a in e?t(e,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[a]=s;import{m as i,n}from"./index.6f62422a.js";import{d as h}from"./debounce.24fbb78c.js";const l={data:()=>({chartInstance:null,allData:[],startValue:0,endValue:9,timerId:null}),computed:((t,i)=>{for(var n in i||(i={}))e.call(i,n)&&r(t,n,i[n]);if(a)for(var n of a(i))s.call(i,n)&&r(t,n,i[n]);return t})({},i(["theme"])),watch:{theme(){this.chartInstance.dispose(),this.initChart(),this.screenAdapter(),this.updateChart()}},created(){},mounted(){this.initChart(),this.getData(),window.addEventListener("resize",h(this.screenAdapter,100)),this.screenAdapter()},destroyed(){window.removeEventListener("resize",h(this.screenAdapter,100)),clearInterval(this.timerId)},methods:{initChart(){this.chartInstance=this.$echarts.init(this.$refs.ref,this.theme);this.chartInstance.setOption({title:{text:"▎地区销售排行",left:20,top:20},grid:{top:"40%",left:"5%",right:"5%",bottom:"5%",containLabel:!0},tooltip:{show:!0},xAxis:{type:"category"},yAxis:{type:"value"},series:[{type:"bar"}]}),this.chartInstance.on("mouseover",(()=>clearInterval(this.timerId))),this.chartInstance.on("mouseout",(()=>this.startInterval()))},async getData(){const{data:t}=await this.$http.get("/rank");this.allData=t,this.allData.sort(((t,e)=>e.value-t.value)),this.updateChart(),this.startInterval()},updateChart(){const t=[["#0ba82c","#4ff778"],["#2e72bf","#23e5e5"],["#5052ee","#ab6ee5"]],e=this.allData.map((t=>t.name)),a=this.allData.map((t=>t.value)),s={xAxis:{data:e},dataZoom:{show:!1,startValue:this.startValue,endValue:this.endValue},series:[{data:a,itemStyle:{color:e=>{let a=null;return a=e.value>300?t[0]:e.value>200?t[1]:t[2],new this.$echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:a[0]},{offset:1,color:a[1]}])}}}]};this.chartInstance.setOption(s)},startInterval(){this.timerId&&clearInterval(this.timerId),this.timerId=setInterval((()=>{this.startValue++,++this.endValue>this.allData.length-1&&(this.startValue=0,this.endValue=9),this.updateChart()}),3e3)},screenAdapter(){const t=this.$refs.ref.offsetWidth/100*3.6,e={title:{textStyle:{fontSize:t}},series:[{barWidth:t,itemStyle:{borderRadius:[t/2,t/2,0,0]}}]};this.chartInstance.setOption(e),this.chartInstance.resize()}}},o={};var c=n(l,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"com-container"},[e("div",{ref:"ref",staticClass:"com-chart"})])}),[],!1,(function(t){for(let e in o)this[e]=o[e]}),"592c43f0",null,null).exports;export{c as R};
