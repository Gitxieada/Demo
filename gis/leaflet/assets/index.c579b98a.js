var e=Object.defineProperty,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,n=(t,o,a)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[o]=a,r=(e,r)=>{for(var l in r||(r={}))o.call(r,l)&&n(e,l,r[l]);if(t)for(var l of t(r))a.call(r,l)&&n(e,l,r[l]);return e};export function __vite_legacy_guard(){import("data:text/javascript,")}import{D as l,a as s,R as c,B as i,U as p,b as u,S as m,c as d,l as f,m as v,H as x,d as h,e as E,f as y}from"./vendor.bf70f5fc.js";function g(e){const{map:t}=e,o=s.exports.useRef(),[a,n]=s.exports.useState(),[x,h]=s.exports.useState(),[E,y]=s.exports.useState(),[g,b]=s.exports.useState(!1),[w,P]=s.exports.useState([]),[S,z]=s.exports.useState(null);async function C(e){var t;const{data:o}=await(a={key:"2f44c036985056d791c7313aa5edbaa0",keywords:e,region:420100,city_limit:!0,page_size:25},console.log("request111",a),l.get("https://restapi.amap.com/v5/place/text?parameters",{params:r({},a)})).catch((e=>{v.error(e)}));var a;"10000"===o.infocode&&(null==(t=o.pois)?void 0:t.length)?(P(o.pois),b(!0)):v.error("搜索地址出错:",o.info)}const k=()=>f.exports.divIcon({className:"my-div-icon poi-icon",iconSize:[30,30],iconAnchor:[15,30]}),N=e=>`\n  <div  style="color:#66c9ff;font-size:16px">${e.address}</div>\n  <div>名称: ${e.name}</div>\n  <div>类型: ${e.type}</div>\n`,O=(e,t,o,a=(()=>{}),n,r,l=(()=>{}),s=(()=>{}))=>{let c=t.map(((e,t)=>{var n;const[r,c]=[...null==(n=e.location)?void 0:n.split(",")];return new f.exports.marker([c+"",r+""],{icon:o(e,t)}).bindPopup(a(e),{closeButton:!1,keepInView:!1,offset:f.exports.point(0,-16)}).on("mouseover",(function(){this.openPopup()})).on("mouseout",(function(){this.closePopup()})).on("click",(function(t){l(e),s(!0)}))}));const i=f.exports.layerGroup(c);r(i),e.addLayer(i),e.setView(e.getCenter())},_=()=>{S&&(S.clearLayers(),z(null))},j=e=>{var o;if(e){const[a,n]=[...null==(o=e.location)?void 0:o.split(",")];n&&a&&f.exports.popup({closeButton:!1,autoPanPadding:f.exports.point(400,150),keepInView:!1,offset:f.exports.point(0,-16)}).setLatLng({lat:n,lng:a}).setContent(N(e)).openOn(t)}};return s.exports.useEffect((()=>{t&&w&&w.length&&(_(),O(t,w,k,N,0,z))}),[w,t]),c.createElement("div",{className:"poi"},0!==(null==w?void 0:w.length)&&(g?c.createElement(i,{shape:"circle",onClick:()=>b(!1),icon:c.createElement(p,null)}):c.createElement(i,{shape:"circle",onClick:()=>b(!0),icon:c.createElement(u,null)})),c.createElement(m,{className:"search",popupclassname:"searchPopup",allowClear:!0,showSearch:!0,placeholder:"检索地址",optionFilterProp:"children",onChange:(e,o)=>{o?(y(o),j(o),b(!1)):(y(),j(),b(!0),null==t||t.closePopup())},onSearch:h,onClear:()=>{P([]),_()},onFocus:()=>{(null==w?void 0:w.length)&&b(!0)},filterOption:!1,options:(I=w,null==I?void 0:I.map((e=>r({value:e.id,label:c.createElement("div",{className:"searchPopupText",title:e.address,onMouseEnter:t=>{E||j(e)}},c.createElement("span",{className:"left"},e.name)," ",c.createElement("span",{className:"right"},e.address))},e)))),suffixIcon:c.createElement(c.Fragment,null),open:g,ref:o}),c.createElement(i,{type:"primary",shape:"round",onClick:()=>{return e=x,void n((t=>t?clearTimeout(t):setTimeout((()=>C(e)),500)));var e},icon:c.createElement(d,null)}));var I}function b(){const[e,t]=s.exports.useState();return s.exports.useEffect((()=>{if(e)return;const o=f.exports.map("leaflet",{minZoom:3,maxZoom:14,center:[30.59,114.3],zoom:13,zoomControl:!1,attributionControl:!1});t(o);f.exports.tileLayer("https://webrd01.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=8&x={x}&y={y}&z={z}").addTo(o),f.exports.control.zoom({position:"topleft"}).addTo(o),f.exports.control.scale({metric:!0,imperial:!1}).addTo(o)}),[]),c.createElement("div",{className:"container"},c.createElement(g,{map:e}),c.createElement("div",{id:"leaflet",className:"map"}))}function w(){return c.createElement("div",{className:"App"},c.createElement(x,null,c.createElement(h,null,c.createElement(E,{exact:!0,path:"/"},c.createElement(b,null)))))}y.render(c.createElement(w,null),document.getElementById("root"));
